/*
 * ═══════════════════════════════════════════════════════════════
 *                           COMBO KEYS
 * ═══════════════════════════════════════════════════════════════
 */

// キー位置定義とマクロ関数は前回と同じ...
// （POS_Q, POS_W等の定義、CMB、CMBL、CMB3、CMB4マクロ）

/ {
    combos {
        compatible = "zmk,combos";
        
        // ═══════════════════════════════════════════════════════════════
        //                        基本操作コンボ（全レイヤー共通）
        // ═══════════════════════════════════════════════════════════════
        
        // 右手上段・ホーム行
        CMB(ime, POS_O, POS_P, &kp LC(SPACE))       // O + P → 半角全角切り替え
        CMB(del, POS_L, POS_MIN, &kp DELETE)        // L + MINUS → DELETE
        CMB(smk, POS_RCK, POS_MO2, &shift_mclk)     // RCLK + MO2 → SHIFT+中央クリック

        // マウスクリック
        CMB(cen, POS_LCK, POS_RCK, &mkp MCLK)       // LCLK + RCLK → 中央クリック

        // 左手基本操作
        CMB(esc, POS_Q, POS_W, &kp ESC)             // Q + W → ESC
        CMB(tab, POS_A, POS_S, &kp TAB)             // A + S → TAB
        CMB(win, POS_Z, POS_X, &kp LWIN)            // Z + X → WIN

        // 親指行操作
        CMB(ccr, POS_LSH, POS_LCT, &kp LC(C))       // SHIFT + CTRL → Ctrl+C
        CMB(vcr, POS_LCT, POS_SPC, &kp LC(V))       // CTRL + SPACE → Ctrl+V
        CMB(xcr, POS_LSH, POS_SPC, &kp LC(X))       // SHIFT + SPACE → Ctrl+X
        CMB(bsp, POS_SPC, POS_ENT, &kp BACKSPACE)   // SPACE + ENTER → BACKSPACE

        // ファンクションキー
        CMB(f1, POS_Q, POS_A, &kp F1)               // Q + A → F1
        CMB(f2, POS_W, POS_S, &kp F2)               // W + S → F2
        CMB(f3, POS_E, POS_D, &kp F3)               // E + D → F3
        CMB(f4, POS_R, POS_F, &kp F4)               // R + F → F4
        CMB(f5, POS_T, POS_G, &kp F5)               // T + G → F5
        CMB(f6, POS_Y, POS_H, &kp F6)               // Y + H → F6
        CMB(f7, POS_U, POS_J, &kp F7)               // U + J → F7
        CMB(f8, POS_I, POS_K, &kp F8)               // I + K → F8
        CMB(f9, POS_O, POS_L, &kp F9)               // O + L → F9
        CMB(f10, POS_P, POS_MIN, &kp F10)           // P + MINUS → F10
        CMB3(f11, POS_E, POS_R, POS_T, &kp F11)     // E + R + T → F11
        CMB3(f12, POS_Y, POS_U, POS_I, &kp F12)     // Y + U + I → F12

        // ═══════════════════════════════════════════════════════════════
        //                        記号キー（英語配列用：レイヤー0-2）
        // ═══════════════════════════════════════════════════════════════
        
        // 引用符（英語配列）
        CMBL(qpo_en0, POS_R, POS_T, &kp SQT, 0)
        CMBL(qpo_en1, POS_R, POS_T, &kp SQT, 1)
        CMBL(qpo_en2, POS_R, POS_T, &kp SQT, 2)
        CMBL(dou_en0, POS_Y, POS_U, &kp DQT, 0)
        CMBL(dou_en1, POS_Y, POS_U, &kp DQT, 1)
        CMBL(dou_en2, POS_Y, POS_U, &kp DQT, 2)
        
        // セミコロン・コロン（英語配列）
        CMBL(sem_en0, POS_F, POS_G, &kp SEMICOLON, 0)
        CMBL(sem_en1, POS_F, POS_G, &kp SEMICOLON, 1)
        CMBL(sem_en2, POS_F, POS_G, &kp SEMICOLON, 2)
        CMBL(col_en0, POS_H, POS_J, &kp COLON, 0)
        CMBL(col_en1, POS_H, POS_J, &kp COLON, 1)
        CMBL(col_en2, POS_H, POS_J, &kp COLON, 2)

        // 基本記号（英語配列）
        CMBL(que_en0, POS_N, POS_M, &kp QMARK, 0)
        CMBL(que_en1, POS_N, POS_M, &kp QMARK, 1)
        CMBL(que_en2, POS_N, POS_M, &kp QMARK, 2)
        CMBL(sla_en0, POS_M, POS_LCK, &kp FSLH, 0)
        CMBL(sla_en1, POS_M, POS_LCK, &kp FSLH, 1)
        CMBL(sla_en2, POS_M, POS_LCK, &kp FSLH, 2)
        CMBL(equ_en0, POS_V, POS_B, &kp EQUAL, 0)
        CMBL(equ_en1, POS_V, POS_B, &kp EQUAL, 1)
        CMBL(equ_en2, POS_V, POS_B, &kp EQUAL, 2)
        CMBL(pls_en0, POS_C, POS_V, &kp PLUS, 0)
        CMBL(pls_en1, POS_C, POS_V, &kp PLUS, 1)
        CMBL(pls_en2, POS_C, POS_V, &kp PLUS, 2)

        // 括弧（英語配列）
        CMBL(lbr_en0, POS_E, POS_R, &kp LBKT, 0)
        CMBL(lbr_en1, POS_E, POS_R, &kp LBKT, 1)
        CMBL(lbr_en2, POS_E, POS_R, &kp LBKT, 2)
        CMBL(lbs_en0, POS_D, POS_F, &kp LBRC, 0)
        CMBL(lbs_en1, POS_D, POS_F, &kp LBRC, 1)
        CMBL(lbs_en2, POS_D, POS_F, &kp LBRC, 2)
        CMBL(rbr_en0, POS_U, POS_I, &kp RBKT, 0)
        CMBL(rbr_en1, POS_U, POS_I, &kp RBKT, 1)
        CMBL(rbr_en2, POS_U, POS_I, &kp RBKT, 2)
        CMBL(rbs_en0, POS_J, POS_K, &kp RBRC, 0)
        CMBL(rbs_en1, POS_J, POS_K, &kp RBRC, 1)
        CMBL(rbs_en2, POS_J, POS_K, &kp RBRC, 2)

        // その他の記号（英語配列）
        CMBL(bac_en0, POS_G, POS_B, &kp BSLH, 0)
        CMBL(bac_en1, POS_G, POS_B, &kp BSLH, 1)
        CMBL(bac_en2, POS_G, POS_B, &kp BSLH, 2)
        CMBL(gra_en0, POS_H, POS_N, &kp GRAVE, 0)
        CMBL(gra_en1, POS_H, POS_N, &kp GRAVE, 1)
        CMBL(gra_en2, POS_H, POS_N, &kp GRAVE, 2)
        CMBL(til_en0, POS_J, POS_M, &kp TILDE, 0)
        CMBL(til_en1, POS_J, POS_M, &kp TILDE, 1)
        CMBL(til_en2, POS_J, POS_M, &kp TILDE, 2)

        // 矢印キー（レイヤー0）
        CMBL(up0, POS_W, POS_E, &kp UP, 0)
        CMBL(dn0, POS_S, POS_D, &kp DOWN, 0)
        CMBL(lt0, POS_A, POS_D, &kp LEFT, 0)
        CMBL(rt0, POS_D, POS_F, &kp RIGHT, 0)

        // 矢印キー（レイヤー3）
        CMBL(up3, POS_W, POS_E, &kp UP, 3)
        CMBL(dn3, POS_S, POS_D, &kp DOWN, 3)
        CMBL(lt3, POS_A, POS_D, &kp LEFT, 3)
        CMBL(rt3, POS_D, POS_F, &kp RIGHT, 3)

        // レイヤー切り替え
        CMB4(layer3, POS_R, POS_T, POS_Y, POS_U, &tog 3)
    };
};
