/*
 * ==================================================================
 *                           COMBO KEYS (pruned)
 *   - Keep only:
 *       1) CMB(cen, POS_LCK, POS_RCK, &mkp MCLK)
 *       2) CMB4(layer3,  ... , &tog 3)
 *       3) CMB4(layer6,  ... , &tog 6)
 *       4) CMB4(layer10, ... , &tog 10)
 * ==================================================================
 */

/* ── キー位置定義（4行5列×2レイアウト） ── */
/* 上段（Row 0: 0-9） */
#define POS_Q 0
#define POS_W 1
#define POS_E 2
#define POS_R 3
#define POS_T 4
#define POS_Y 5
#define POS_U 6
#define POS_I 7
#define POS_O 8
#define POS_P 9

/* ホーム行（Row 1: 10-19） */
#define POS_A 10
#define POS_S 11
#define POS_D 12
#define POS_F 13
#define POS_G 14
#define POS_H 15
#define POS_J 16
#define POS_K 17
#define POS_L 18
#define POS_MIN 19  /* MINUS */

/* 下段（Row 2: 20-29） */
#define POS_Z 20
#define POS_X 21
#define POS_C 22
#define POS_V 23
#define POS_B 24
#define POS_N 25
#define POS_M 26
#define POS_LCK 27  /* LCLK */
#define POS_RCK 28  /* RCLK */
#define POS_MO2 29  /* mo 2 */

/* 親指行（Row 3: 30-39） */
#define POS_NONE1 30  /* none */
#define POS_NONE2 31  /* none */
#define POS_NONE3 32  /* none */
#define POS_LSH 33    /* LSHIFT */
#define POS_LCT 34    /* LCTRL */
#define POS_SPC 35    /* SPACE */
#define POS_ENT 36    /* ENTER */
#define POS_NONE4 37  /* none */
#define POS_NONE5 38  /* none */
#define POS_NONE6 39  /* none */

/* ── コンボ用マクロ（timeout固定） ── */
#define CMB(name, pos1, pos2, binding) \
    combo_##name { \
        timeout-ms = <50>; \
        key-positions = <pos1 pos2>; \
        bindings = <binding>; \
    };

#define CMBL(name, pos1, pos2, binding, layer) \
    combo_##name { \
        timeout-ms = <70>; \
        key-positions = <pos1 pos2>; \
        bindings = <binding>; \
        layers = <layer>; \
    };

#define CMB3(name, pos1, pos2, pos3, binding) \
    combo_##name { \
        timeout-ms = <70>; \
        key-positions = <pos1 pos2 pos3>; \
        bindings = <binding>; \
    };

#define CMB4(name, pos1, pos2, pos3, pos4, binding) \
    combo_##name { \
        timeout-ms = <100>; \
        key-positions = <pos1 pos2 pos3 pos4>; \
        bindings = <binding>; \
    };

 /{
    combos {
        compatible = "zmk,combos";

        /* 中央クリック（これだけ残す） */
        CMB(cen, POS_LCK, POS_RCK, &mkp MCLK)

        /* ── トグルレイヤー（これだけ残す） ── */
        CMB4(layer3,  POS_R, POS_T, POS_Y, POS_U, &tog 3)
        CMB4(layer6,  POS_F, POS_G, POS_H, POS_J, &tog 6)
        CMB4(layer10, POS_V, POS_B, POS_N, POS_M, &tog 10)
    };
};
