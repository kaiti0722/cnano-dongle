/*
 * ═══════════════════════════════════════════════════════════════
 *                           COMBO KEYS
 * ═══════════════════════════════════════════════════════════════
 */

// ═══════════════════════════════════════════════════════════════
//                        キー位置定義（シンプル命名）
// ═══════════════════════════════════════════════════════════════

// 上段（Row 0）
#define Q 0
#define W 1
#define E 2
#define R 3
#define T 4
#define Y 5
#define U 6
#define I 7
#define O 8
#define P 9

// ホーム行（Row 1）
#define A 10
#define S 11
#define D 12
#define F 13
#define G 14
#define H 15
#define J 16
#define K 17
#define L 18
#define MIN 19  // MINUS

// 下段（Row 2）
#define Z 20
#define X 21
#define C 22
#define V 23
#define B 24
#define N 25
#define M 26
#define LCK 27  // LCLK
#define RCK 28  // RCLK
#define BSP 29  // BACKSPACE

// 親指行（Row 3）
#define LSH 31   // LSHIFT
#define SPC 32   // SPACE
#define MO1 33   // mo 1
#define LCT 34   // LCTRL
#define DOT 35   // PERIOD
#define MO2 36   // mo 2
#define COM 37   // COMMA
#define ENT 38   // ENTER

// ═══════════════════════════════════════════════════════════════
//                        マクロ関数（タイムアウト50固定）
// ═══════════════════════════════════════════════════════════════

// 基本Combo定義マクロ（全レイヤー有効）
#define CMB(name, pos1, pos2, binding) \
    combo_##name { \
        timeout-ms = <50>; \
        key-positions = <pos1 pos2>; \
        bindings = <binding>; \
    };

// レイヤー限定Combo定義マクロ
#define CMBL(name, pos1, pos2, binding, layer) \
    combo_##name { \
        timeout-ms = <50>; \
        key-positions = <pos1 pos2>; \
        bindings = <binding>; \
        layers = <layer>; \
    };

// 3キーCombo定義マクロ
#define CMB3(name, pos1, pos2, pos3, binding) \
    combo_##name { \
        timeout-ms = <50>; \
        key-positions = <pos1 pos2 pos3>; \
        bindings = <binding>; \
    };

/ {
    combos {
        compatible = "zmk,combos";
        
        // ──────────────────────────────────────────────────────────
        // ナビゲーション系（全レイヤー有効）
        // ──────────────────────────────────────────────────────────
        
        CMB(esc, Q, W, &kp ESC)         // Q + W → ESC
        CMB(tab, A, S, &kp TAB)         // A + S → TAB
        CMB(win, Z, X, &kp LWIN)        // Z + X → WIN
        CMB(del, O, P, &kp DELETE)      // O + P → DELETE
        CMB(ime, F, J, &kp LA(GRAVE))   // F + J → 半角全角切り替え
        
        // ──────────────────────────────────────────────────────────
        // 編集系
        // ──────────────────────────────────────────────────────────
        
        CMB(ent, K, L, &kp ENTER)       // K + L → ENTER
        CMB(bsp, V, B, &kp BSPC)        // V + B → BACKSPACE
        
        // ──────────────────────────────────────────────────────────
        // マウス操作系（Layer 0のみ）
        // ──────────────────────────────────────────────────────────
        
        CMBL(mid, LCK, RCK, &mkp MCLK, 0)  // 左クリック + 右クリック → 中央クリック
        
        // ──────────────────────────────────────────────────────────
        // 今後追加用テンプレート
        // ──────────────────────────────────────────────────────────
        
        // CMB(copy, C, D, &kp LC(C))     // C + D → Ctrl+C
        // CMB(paste, V, N, &kp LC(V))    // V + N → Ctrl+V
        // CMB(save, S, D, &kp LC(S))     // S + D → Ctrl+S
        // CMB(undo, Z, A, &kp LC(Z))     // Z + A → Ctrl+Z
        
        // 数字系
        // CMB(num0, M, N, &kp N0)        // M + N → 0
        // CMB(num1, Q, A, &kp N1)        // Q + A → 1
        // CMB(num2, W, S, &kp N2)        // W + S → 2
        
        // 記号系
        // CMB(excl, E, R, &kp EXCL)      // E + R → !
        // CMB(ques, U, I, &kp QMARK)     // U + I → ?
        
        // 3キーCombo
        // CMB3(cad, Q, W, E, &kp LC(LA(DELETE)))  // Ctrl+Alt+Del
    };
};
